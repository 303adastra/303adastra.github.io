<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="467px" preserveAspectRatio="none" style="width:1612px;height:467px;" version="1.1" viewBox="0 0 1612 467" width="1612px" zoomAndPan="magnify"><defs><filter height="300%" id="f103o3b80xt43n" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[43086910d1c29d80acef24428b87f93a]
cluster ibd [ PID-Controlled Clock Drive ]--><rect fill="#FFFFFF" filter="url(#f103o3b80xt43n)" height="425" style="stroke: #000000; stroke-width: 1.5;" width="1579" x="22" y="24"/><path d="M290,25 L290,33.2969 L280,43.2969 L22,43.2969 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="258" x="25" y="37.9951">ibd [ PID-Controlled Clock Drive ]</text><!--MD5=[b3b444921c8b4ce57d1ac277af47b801]
cluster G--><rect fill="#FFFFFF" filter="url(#f103o3b80xt43n)" height="332" style="stroke: #000000; stroke-width: 1.5;" width="778" x="277" y="67"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="121" x="605.5" y="81.9951">«microcontroller»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="109" x="611.5" y="98.292">PID Controller</text><!--MD5=[4257423e334641e537ffa92160115f43]
cluster H--><rect fill="#FFFFFF" filter="url(#f103o3b80xt43n)" height="229" style="stroke: #000000; stroke-width: 1.5;" width="171" x="1406" y="135"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="155" x="1414" y="149.9951">Motor Drive System</text><!--MD5=[fe438d1f4f8e9d5c7b4fbab750bc347c]
entity rtc--><rect fill="#FEFECE" filter="url(#f103o3b80xt43n)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="192" x="38" y="59"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="33" y="64"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="33" y="85.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172" x="48" y="81.9951">Real Time Clock (RTC)</text><!--MD5=[91d9cb3fe8da25a9d94a8d1c8a5537e3]
entity serial_bus_rtc--><ellipse cx="134" cy="156" fill="#FEFECE" filter="url(#f103o3b80xt43n)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="78" x="95" y="185.9951">Serial Bus</text><!--MD5=[00179af9bc14e048fef3c02ab7970256]
entity pwm--><ellipse cx="1249" cy="188" fill="#FEFECE" filter="url(#f103o3b80xt43n)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="156" x="1171" y="217.9951">Motor Speed (PWM)</text><!--MD5=[be730da0fa030af7835659de9639f112]
entity ra--><ellipse cx="1491" cy="392" fill="#FEFECE" filter="url(#f103o3b80xt43n)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="211" x="1385.5" y="421.9951">Right Ascension (RA) Shaft</text><!--MD5=[95aea0a53efb618fc569ece1197781df]
entity encoder--><rect fill="#FEFECE" filter="url(#f103o3b80xt43n)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="1178" y="374"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1173" y="379"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1173" y="400.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="1188" y="396.9951">Rotory Encoder</text><!--MD5=[bc4a969ff08a2eaa91c6da3075656cca]
entity serial_bus_encoder--><ellipse cx="916.5" cy="424" fill="#FEFECE" filter="url(#f103o3b80xt43n)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="78" x="877.5" y="453.9951">Serial bus</text><!--MD5=[01ef136a8cd3f2d1aeb5d71059498911]
entity serial_read_rtc--><rect fill="#FEFECE" filter="url(#f103o3b80xt43n)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="197" x="323" y="118"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="318" y="123"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="318" y="144.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="177" x="333" y="140.9951">t = serial.read(rtc_pin)</text><!--MD5=[cc4c567705907bcfd41ffb3d7ff8b844]
entity theta_r--><rect fill="#FEFECE" filter="url(#f103o3b80xt43n)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="257" x="293" y="189"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="288" y="194"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="288" y="215.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="237" x="303" y="211.9951">Reference Angle, theta_r(t-t0)</text><!--MD5=[e32773a0da76c445e84e5885468a4484]
entity e--><ellipse cx="421.5" cy="286" fill="#FEFECE" filter="url(#f103o3b80xt43n)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="391" y="315.9951">error, e</text><!--MD5=[7d46d6cd919e02e6168a09ad91eae8b4]
entity u--><ellipse cx="916.5" cy="246" fill="#FEFECE" filter="url(#f103o3b80xt43n)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="145" x="844" y="275.9951">Control variable, u</text><!--MD5=[e36a11a12b620da16044f2fd4cd93201]
entity pwm_gen--><rect fill="#FEFECE" filter="url(#f103o3b80xt43n)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="856.5" y="166"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="851.5" y="171"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="851.5" y="192.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="100" x="866.5" y="188.9951">pwm.duty(u)</text><!--MD5=[c05673ed0df25619424a6f9de288c317]
entity serial_read_encoder--><rect fill="#FEFECE" filter="url(#f103o3b80xt43n)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="245" x="794" y="344"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="789" y="349"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="789" y="370.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="225" x="804" y="366.9951">n = serial.read(encoder_pin)</text><!--MD5=[ed3f4e453fd7f496a8f255d1c0b67525]
entity theta--><rect fill="#FEFECE" filter="url(#f103o3b80xt43n)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="197" x="323" y="347"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="318" y="352"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="318" y="373.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="177" x="333" y="369.9951">Output Angle, theta(n)</text><!--MD5=[be5750da26e06623bc49653cefaf97c7]
entity p--><rect fill="#FEFECE" filter="url(#f103o3b80xt43n)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="75" x="628.5" y="294"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="623.5" y="299"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="623.5" y="320.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="55" x="638.5" y="316.9951">K_p * e</text><!--MD5=[c807758c2e9e0d1754c3d4b69a0f6713]
entity i--><rect fill="#FEFECE" filter="url(#f103o3b80xt43n)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="615" y="223"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="610" y="228"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="610" y="249.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="625" y="245.9951">K_i * de*dt</text><!--MD5=[011db1d27274c86691871bc51b12beb8]
entity d--><rect fill="#FEFECE" filter="url(#f103o3b80xt43n)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="613" y="152"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="608" y="157"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="608" y="178.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="623" y="174.9951">K_d * de/dt</text><!--MD5=[21b7ecfcf7fc031bbfae6c4dcbc60101]
entity drive--><rect fill="#FEFECE" filter="url(#f103o3b80xt43n)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="1435" y="170"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1430" y="175"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1430" y="196.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="92" x="1445" y="192.9951">motor drive</text><!--MD5=[8d6760d652c677979d4712a0f3854444]
entity motor--><rect fill="#FEFECE" filter="url(#f103o3b80xt43n)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="1457.5" y="241"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1452.5" y="246"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1452.5" y="267.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="1467.5" y="263.9951">motor</text><!--MD5=[2088bddee7b207db8f57d8431ec125a1]
entity gearbox--><rect fill="#FEFECE" filter="url(#f103o3b80xt43n)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="1448.5" y="312"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1443.5" y="317"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1443.5" y="338.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="1458.5" y="334.9951">gearbox</text><!--MD5=[5ba437009d88a482ad156e6fbc9375f0]
reverse link e to theta_r--><path d="M421.5,271.771 C421.5,258.733 421.5,239.362 421.5,225.202 " fill="none" id="e&lt;-theta_r" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="421.5,276.938,425.5,267.938,421.5,271.938,417.5,267.938,421.5,276.938" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="404.5" y="255.5669">+</text><!--MD5=[c4367ad9f45d960972e7542a6a912add]
link e to p--><path d="M430.568,286.865 C460.165,290.038 564.11,301.183 623.17,307.515 " fill="none" id="e-&gt;p" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="628.392,308.075,619.8696,303.1386,623.4205,307.5421,619.017,311.0931,628.392,308.075" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[a185da4cb047bb69466c81d1f9f92ad2]
link e to i--><path d="M430.568,284.503 C458.066,279.4 549.742,262.388 609.972,251.211 " fill="none" id="e-&gt;i" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="614.974,250.283,605.395,247.9935,610.058,251.1959,606.8556,255.859,614.974,250.283" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[e242a9fb4540aaf3741aa3229240ce97]
link e to d--><path d="M430.866,283.179 C459.231,273.612 550,243 550,243 C550,243 589,205 589,205 C589,205 604.139,198.028 620.904,190.307 " fill="none" id="e-&gt;d" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="625.664,188.115,615.816,188.2464,621.1224,190.2065,619.1624,195.5129,625.664,188.115" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[612215d5b06a51f8bcf4a4eadfbee5b8]
link p to u--><path d="M703.667,302.261 C760.029,287.292 865.311,259.33 902.267,249.515 " fill="none" id="p-&gt;u" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="907.21,248.202,897.4846,246.6476,902.3777,249.4861,899.5392,254.3793,907.21,248.202" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="752" y="282.0669">+</text><!--MD5=[4fb6e00de6d63d7bacb858425dac4551]
link i to u--><path d="M717.288,242.012 C775.472,243.183 867.679,245.038 902.024,245.729 " fill="none" id="i-&gt;u" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="907.386,245.837,898.469,241.6553,902.387,245.7356,898.3067,249.6536,907.386,245.837" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="752" y="238.0669">+</text><!--MD5=[71a63e2c05af7b0bc37f889eaddfd503]
link d to u--><path d="M713.929,188.107 C750.107,202.065 794,219 794,219 C794,219 870.582,236.018 902.146,243.032 " fill="none" id="d-&gt;u" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="907.149,244.144,899.2321,238.2854,902.2683,243.0584,897.4952,246.0946,907.149,244.144" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="752" y="200.0669">+</text><!--MD5=[773f693c59583fb39ecd6e922ba1fe22]
link u to pwm_gen--><path d="M916.5,236.634 C916.5,231.166 916.5,225.333 916.5,225.333 C916.5,225.333 916.5,214.188 916.5,207.263 " fill="none" id="u-&gt;pwm_gen" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="916.5,202.133,912.5,211.133,916.5,207.133,920.5,211.133,916.5,202.133" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[55e9cd31b940c1ac06d889e09b6043ee]
reverse link theta_r to serial_read_rtc--><path d="M421.5,183.744 C421.5,183.478 421.5,183.333 421.5,183.333 C421.5,183.333 421.5,159.667 421.5,159.667 C421.5,159.667 421.5,157.355 421.5,154.178 " fill="none" id="theta_r&lt;-serial_read_rtc" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="421.5,188.822,425.5,179.822,421.5,183.822,417.5,179.822,421.5,188.822" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[12105290172d9494048af6b8d30668b1]
link theta to e--><path d="M421.5,346.677 C421.5,332.638 421.5,313.532 421.5,300.536 " fill="none" id="theta-&gt;e" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="421.5,295.373,417.5,304.373,421.5,300.373,425.5,304.373,421.5,295.373" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="407.5" y="325.5669">-</text><!--MD5=[16a32cc78219c0a40a5684040984b20d]
reverse link theta to serial_read_encoder--><path d="M525.306,364.374 C603.546,363.898 711.463,363.242 793.976,362.739 " fill="none" id="theta&lt;-serial_read_encoder" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="520.196,364.406,529.2198,368.3519,525.1959,364.376,529.1718,360.3521,520.196,364.406" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[8805fedeee4c6cc35145965b3921f244]
link serial_bus_rtc to rtc--><path d="M134,146.938 C134,134.374 134,111.385 134,95.202 " fill="none" id="serial_bus_rtc-rtc" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="92.5" y="125.5669">«SPI/I2C»</text><!--MD5=[7ebdfb376876873fee62cb9383076377]
link serial_bus_rtc to serial_read_rtc--><path d="M143.237,155.423 C169.568,153.578 254.004,147.663 322.846,142.841 " fill="none" id="serial_bus_rtc-serial_read_rtc" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[0812df24127a64610885a8247f2d063c]
link pwm_gen to pwm--><path d="M976.587,184.715 C1055.84,185.674 1191.58,187.317 1234.55,187.837 " fill="none" id="pwm_gen-&gt;pwm" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1239.76,187.9,1230.8063,183.7974,1234.7603,187.8429,1230.7149,191.7969,1239.76,187.9" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[752c72a1e0e286e88fd7aaaa3778ced5]
reverse link motor to drive--><path d="M1491,235.744 C1491,235.478 1491,235.333 1491,235.333 C1491,235.333 1491,211.667 1491,211.667 C1491,211.667 1491,209.355 1491,206.178 " fill="none" id="motor&lt;-drive" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1491,240.822,1495,231.822,1491,235.822,1487,231.822,1491,240.822" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[438850e27b210e28590b2b601a50b320]
reverse link gearbox to motor--><path d="M1491,306.744 C1491,306.478 1491,306.333 1491,306.333 C1491,306.333 1491,282.667 1491,282.667 C1491,282.667 1491,280.355 1491,277.178 " fill="none" id="gearbox&lt;-motor" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1491,311.822,1495,302.822,1491,306.822,1487,302.822,1491,311.822" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[397e8682bd16cc05f570c8ea6c4810cf]
link pwm to drive--><path d="M1258.26,188 C1284.9,188 1370.27,188 1429.6,188 " fill="none" id="pwm-&gt;drive" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1434.9,188,1425.9,184,1429.9,188,1425.9,192,1434.9,188" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[6808d634b72dd6a2921f7200cd964c2b]
reverse link ra to gearbox--><path d="M1491,377.5901 C1491,374.0902 1491,371.3333 1491,371.3333 C1491,371.3333 1491,350.667 1491,350.667 C1491,350.667 1491,349.678 1491,348.133 " fill="none" id="ra&lt;-gearbox" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1491,382.6342,1495,373.6342,1491,377.6342,1487,373.6342,1491,382.6342" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[f474ad76e4c9f02b797d5cea3ad4a08e]
reverse link encoder to ra--><path d="M1325.27,392 C1383.25,392 1457.51,392 1481.86,392 " fill="none" id="encoder&lt;-ra" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1320.06,392,1329.06,396,1325.06,392,1329.06,388,1320.06,392" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[39ca404df132807ba61dfd1ec51ead3e]
link serial_bus_encoder to serial_read_encoder--><path d="M916.5,414.6342 C916.5,409.166 916.5,403.3333 916.5,403.3333 C916.5,403.3333 916.5,382.6667 916.5,382.6667 C916.5,382.6667 916.5,381.6777 916.5,380.1325 " fill="none" id="serial_bus_encoder-serial_read_encoder" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[433bbeae210b26b3d52d53e50919ac58]
link serial_bus_encoder to encoder--><path d="M925.67,423.209 C959.864,419.8982 1093.61,406.948 1177.71,398.806 " fill="none" id="serial_bus_encoder-encoder" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="1072" y="399.0669">«SPI/I2C»</text><!--MD5=[c08fde4b2b2250e266538b0b5f35d576]
@startuml
left to right direction
skinparam linetype polyline

frame "ibd [ PID-Controlled Clock Drive ]" {

  component "<b>Real Time Clock (RTC)</b>" as rtc

  rectangle "<b>PID Controller</b>" <<microcontroller>> as G {

    component "<b>t = serial.read(rtc_pin)</b>" as serial_read_rtc
    component "<b>Reference Angle, theta_r(t-t0)</b>" as theta_r

    interface "<b>error, e</b>" as e
    together {
      component "<b>K_p * e</b>" as p
      component "<b>K_i * de*dt</b>" as i
      component "<b>K_d * de/dt</b>" as d
    }

    e <- theta_r : +

    e - -> p
    e - -> i
    e - -> d

    interface "<b>Control variable, u</b>" as u
    p - -> u : +
    i - -> u : +
    d - -> u : +

    component "<b>pwm.duty(u)</b>" as pwm_gen
    u -> pwm_gen

    component "<b>n = serial.read(encoder_pin)</b>" as serial_read_encoder
    component "<b>Output Angle, theta(n)</b>" as theta

    theta_r <- serial_read_rtc
    theta -> e : -
    theta <- - - serial_read_encoder
  }

  interface "<b>Serial Bus</b>" as serial_bus_rtc
  serial_bus_rtc . rtc : <<SPI/I2C>>
  serial_bus_rtc - - serial_read_rtc

  interface "<b>Motor Speed (PWM)</b>" as pwm
  pwm_gen - -> pwm

  rectangle "<b>Motor Drive System</b>" as H {
    component "<b>motor drive</b>" as drive
    component "<b>motor</b>" as motor
    component "<b>gearbox</b>" as gearbox
    motor <- drive
    gearbox <- motor
  }

  pwm ..> drive

  interface "<b>Right Ascension (RA) Shaft</b>" as ra
  component "<b>Rotory Encoder</b>" as encoder
  interface "<b>Serial bus</b>" as serial_bus_encoder

  ra <. gearbox
  encoder <.. ra

  serial_bus_encoder - serial_read_encoder
  serial_bus_encoder .. encoder : <<SPI/I2C>>
}
@enduml

PlantUML version 1.2020.06(Sun Apr 05 05:38:32 PDT 2020)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.7+10-post-Ubuntu-3ubuntu1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>